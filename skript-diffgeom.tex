%%
%% Skript Differentialgeometrie im Wintersemester 12/13
%% Zur Vorlesung von Dr. Grensing am KIT Karlsruhe
%%
%% Mitschrieb und Textsatz von Jan-Bernhard Kordaß.
%%
\documentclass[a4paper, twoside, 11pt]{scrartcl}

\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}

\usepackage[ngerman]{babel}
\usepackage[a4paper, top=2.5cm, bottom=3cm, left=2.5cm, right=5cm]{geometry}

\usepackage{fancyhdr} % erlaubt mehr Optionen in Kopf- und Fusszeile
\usepackage{marginnote} % Randnotizen
\usepackage{enumitem} % Fuer mehr Einstellungmoeglichkeiten bei Aufzaehlungen
%\usepackage{enumerate} % Fuer mehr Einstellungmoeglichkeiten bei Aufzaehlungen
\usepackage{xifthen} % Erlaubt die Verwendung von if-then-else Befehlen im Code
\usepackage{makeidx} % Fuer den Index
\usepackage{xspace} % intelligende Leerzeichen bei Macros

\usepackage{tikz} % Fuer Zeichnungen in TikZ
\usetikzlibrary{matrix,arrows,calc,intersections, positioning, patterns, decorations.text}

\usepackage[toc]{glossaries} % Symbolverzeichnis
\glossarystyle{treehypergroup}
\makeglossaries

% Mathe Pakete
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

% common mathematical operators and sets
\DeclareMathOperator{\aff}{aff} % affine Huelle
\DeclareMathOperator{\diam}{diam} % diameter
\DeclareMathOperator{\dist}{dist} % distance
\DeclareMathOperator{\ggT}{ggT} % goesster gemeinsamer Teiler
\DeclareMathOperator{\inh}{inh} % Inhalt
\DeclareMathOperator{\grad}{grad} % Gradient
\DeclareMathOperator{\kgV}{kgV} % kleinstes gemeinsames Vielfaches
\DeclareMathOperator{\mspan}{span} % Lineare Huelle
\DeclareMathOperator{\n}{n} % Umlaufzahl
\DeclareMathOperator{\offen}{offen}
\DeclareMathOperator{\res}{res} % Residuum
\DeclareMathOperator{\rg}{rg} % rank (i)
\DeclareMathOperator{\sgn}{sgn} % Signum
\DeclareMathOperator{\supp}{supp} % support
\DeclareMathOperator{\sternf}{sternf}

\DeclareMathOperator{\Abb}{Abb} % maps
\DeclareMathOperator{\Aut}{Aut} % automorphisms
\DeclareMathOperator{\Bild}{Bild}
\DeclareMathOperator{\Charakteristik}{char}
\DeclareMathOperator{\Charakt}{char}
\DeclareMathOperator{\Diff}{Diff}
\DeclareMathOperator{\End}{End} % endomorphisms
\DeclareMathOperator{\Graph}{Graph}
\DeclareMathOperator{\Hom}{Hom} % homomorphisms
\DeclareMathOperator{\Id}{Id} % identity
\DeclareMathOperator{\Inn}{Inn} % Untergruppe der inneren Automorphismen
\DeclareMathOperator{\Kern}{Kern}
\DeclareMathOperator{\Relation}{\scriptstyle\mathrm{R}} % custom Relation
\DeclareMathOperator{\Rang}{Rang} % rank (ii)
\DeclareMathOperator{\Stab}{Stab} % Stabilisator
\DeclareMathOperator{\Sym}{Sym} % symmetric group

\newcommand{\Zentrum}[1]{\ensuremath{\mathrm Z(#1)}} % Zentrum einer Gruppe
\newcommand{\Ordnung}[1][]{ % Ordnung einer Gruppe
  \ifthenelse{\isempty{#1}}{
    \#
  }{
    \left|#1\right|
  }
}

%Realteil und Imaginaerteil
\renewcommand{\Re}{\ensuremath{\operatorname{Re}}} % <-- sollte man da nicht besser \DeclareMathOperator verwenden?
\renewcommand{\Im}{\ensuremath{\operatorname{Im}}}

% \DeclareMathOperator{\Real}{Re} % real part
% \DeclareMathOperator{\Imag}{Im} % imaginary part

% canonic sets
\DeclareMathOperator{\C}{\mathbb{C}}
\DeclareMathOperator{\F}{\mathbb{F}}
\DeclareMathOperator{\K}{\mathbb{K}}
\DeclareMathOperator{\N}{\mathbb{N}}
\DeclareMathOperator{\Q}{\mathbb{Q}}
\DeclareMathOperator{\R}{\mathbb{R}}
\DeclareMathOperator{\RP}{\mathbb{RP}} % real projection plane
\DeclareMathOperator{\Tor}{\mathbb{T}} % torus
\DeclareMathOperator{\Z}{\mathbb{Z}}

% Redeclare \P (Prim or Propability) and put the old, reversed "breakline P" in \BreakLineP
\let\BreakLineP\P
\renewcommand{\P}{\ensuremath{\mathbb{P}}}

% canonic differentiation, 
\DeclareMathOperator{\T}{T} % tangent bundle
\DeclareMathOperator{\D}{D} % Jacobi matrix or derivative

% Differentialoperatoren als Brüche
\newcommand{\dop}{\mathrm{d}}	
%\newcommand{\difffrac}[2][]{\dfrac{\dop #1}{\dop #2}}
\newcommand{\difffrac}[3][]{\ifthenelse{\isempty{#1}}{\dfrac{\dop #2}{\dop #3}}{\left. \dfrac{\dop #2}{\dop #3} \right|_{#1}}}
%\newcommand{\pdifffrac}[2][]{\dfrac{\partial #1}{\partial #2}}
\newcommand{\pdifffrac}[3][]{\ifthenelse{\isempty{#1}}{\dfrac{\partial #2}{\partial #3}}{\left. \dfrac{\partial #2}{\partial #3} \right|_{#1}}}

% stellt einen großen vertikalen Strich an einen Term, nuetzlich in Bruechen
\newcommand{\bigvert}[1]{\left. #1 \right|}

% quotient space or group
\newcommand{\modulo}[1]{\ensuremath{/_{\displaystyle #1}}}

% declaring Index for group theory
\newcommand{\Index}[2]{\ensuremath{(#1 \SlimDdot #2)}}


% canonic environments
\newcounter{thmglobal}
\swapnumbers
\theoremstyle{plain}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter

% Options
\newboolean{enableDeepNumbering}
\setboolean{enableDeepNumbering}{false}

\DeclareOption{deepnum}{
  \setboolean{enableDeepNumbering}{true}
}

\newboolean{enableMarginThm}
\setboolean{enableMarginThm}{false}

\DeclareOption{marginthm}{
  \setboolean{enableMarginThm}{true}
}

\ProcessOptions\relax

% call makeindex for an index register
\makeindex

% Name language settings

\iflanguage{ngerman}{
  % theorem names, ngerman
  \newcommand{\cmLangThmSatz}{Satz\xspace}
  \newcommand{\cmLangThmLemma}{Lemma\xspace}
  \newcommand{\cmLangThmKor}{Korollar\xspace}
  \newcommand{\cmLangThmProp}{Proposition\xspace}

  \newcommand{\cmLangThmDfn}{Definition\xspace}
  \newcommand{\cmLangThmBsp}{Beispiel\xspace}

  \newcommand{\cmLangThmBem}{Bemerkung\xspace}

  % short forms, ngerman
  \newcommand{\cmLangThmShortSatz}{Satz\xspace}
  \newcommand{\cmLangThmShortLemma}{Lemma\xspace}
  \newcommand{\cmLangThmShortKor}{Kor\xspace}
  \newcommand{\cmLangThmShortProp}{Prop\xspace}

  \newcommand{\cmLangThmShortDfn}{Def\xspace}
  \newcommand{\cmLangThmShortBsp}{Bsp\xspace}

  \newcommand{\cmLangThmShortBem}{Bem\xspace}
}{
  % theorem names, english
  \newcommand{\cmLangThmSatz}{Theorem\xspace}
  \newcommand{\cmLangThmLemma}{Lemma\xspace}
  \newcommand{\cmLangThmKor}{Corollary\xspace}
  \newcommand{\cmLangThmProp}{Proposition\xspace}

  \newcommand{\cmLangThmDfn}{Definition\xspace}
  \newcommand{\cmLangThmBsp}{Example\xspace}

  \newcommand{\cmLangThmBem}{Remark\xspace}

  % short forms, ngerman
  \newcommand{\cmLangThmShortSatz}{Thm\xspace}
  \newcommand{\cmLangThmShortLemma}{Lemma\xspace}
  \newcommand{\cmLangThmShortKor}{Cor\xspace}
  \newcommand{\cmLangThmShortProp}{Prop\xspace}

  \newcommand{\cmLangThmShortDfn}{Def\xspace}
  \newcommand{\cmLangThmShortBsp}{Exp\xspace}

  \newcommand{\cmLangThmShortBem}{Rem\xspace}
}


\ifthenelse{\boolean{enableMarginThm}}{

  % use the especially for lecture scripts and summeries designed margin theorem style
  \RequirePackage{marginnote}

  \newcommand{\CmMarginThmHead}[1]{\textsf{\textbf{#1}}}
  \newcommand{\CmMarginThmNum}{\arabic{section}.\ifthenelse{\boolean{enableDeepNumbering}}{\arabic{subsection}.}{}\arabic{thmglobal}\xspace}
  \newcommand{\CmMarginThmDescription}[1][]{\ifthenelse{\isempty{#1}}{}{ \textit{#1}}}
  \newlength{\cmMarginThmSpaceBottom}
  \setlength{\cmMarginThmSpaceBottom}{0.3cm}
  \newlength{\cmMarginThmSpaceTop}
  \setlength{\cmMarginThmSpaceTop}{0.1cm}
  \newcommand{\CmMarginThmStandardLayoutBegin}[2]{
    \refstepcounter{thmglobal}
    \vspace{\cmMarginThmSpaceTop}
    \marginnote{\CmMarginThmHead{\CmMarginThmNum #2} \CmMarginThmDescription[#1]}
  }
  \newcommand{\CmMarginThmStandardLayoutEnd}{\vspace{\cmMarginThmSpaceBottom}}

  \newenvironment{satz}[1][]{
    \CmMarginThmStandardLayoutBegin{#1}{\cmLangThmShortSatz}
    \begin{itshape}
    }{\end{itshape}\CmMarginThmStandardLayoutEnd}
  \newenvironment{lemma}[1][]{
    \CmMarginThmStandardLayoutBegin{#1}{\cmLangThmShortLemma}
    \begin{itshape}
    }{\end{itshape}\CmMarginThmStandardLayoutEnd}
  \newenvironment{kor}[1][]{
    \CmMarginThmStandardLayoutBegin{#1}{\cmLangThmShortKor}
    \begin{itshape}
    }{\end{itshape}\CmMarginThmStandardLayoutEnd}
  \newenvironment{prop}[1][]{
    \CmMarginThmStandardLayoutBegin{#1}{\cmLangThmShortProp}
    \begin{itshape}
    }{\end{itshape}\CmMarginThmStandardLayoutEnd}

  \newenvironment{dfn}[1][]{
    \CmMarginThmStandardLayoutBegin{#1}{\cmLangThmShortDfn}
  }{\CmMarginThmStandardLayoutEnd}
  \newenvironment{bsp}[1][]{
    \CmMarginThmStandardLayoutBegin{#1}{\cmLangThmShortBsp}
  }{\CmMarginThmStandardLayoutEnd}

  \newenvironment{bem}[1][]{
    \CmMarginThmStandardLayoutBegin{#1}{\cmLangThmShortBem}
  }{\CmMarginThmStandardLayoutEnd}

}{% use classic amsthm theorems

  \newtheorem{satz}[thmglobal]{\cmLangThmSatz}
  \newtheorem{lemma}[thmglobal]{\cmLangThmLemma}
  \newtheorem{kor}[thmglobal]{\cmLangThmKor}
  \newtheorem{prop}[thmglobal]{\cmLangThmProp}

  \theoremstyle{definition}

  \newtheorem{dfn}[thmglobal]{\cmLangThmDfn}
  \newtheorem{bsp}[thmglobal]{\cmLangThmBsp}

  \theoremstyle{remark}

  \newtheorem{bem}[thmglobal]{\cmLangThmBem}
}

% Add unnumbered Theorems, use amsthm style in both style modes
\theoremstyle{plain}
\newtheorem*{satz*}{\cmLangThmSatz}
\newtheorem*{lemma*}{\cmLangThmLemma}
\newtheorem*{kor*}{\cmLangThmKor}
\newtheorem*{prop*}{\cmLangThmProp}

\theoremstyle{definition}
\newtheorem*{dfn*}{\cmLangThmDfn}
\newtheorem*{bsp*}{\cmLangThmBsp}

\theoremstyle{remark}
\newtheorem*{bem*}{\cmLangThmBem}


% 2-level numbering$
\numberwithin{thmglobal}{section}

% check if 3-level numbering is enabled
\ifthenelse{\boolean{enableDeepNumbering}}{
  \numberwithin{thmglobal}{subsection}
}{}


% some other customisations

% changing enumerations
\setlist[enumerate]{label=(\arabic*), itemsep=0cm, leftmargin=2cm}
\setlist[itemize]{itemsep=0cm} %\setlist[itemize]{itemsep=0cm, leftmargin=2cm}

% replace the slim emptyset symbol
\let\emptyset\varnothing

% set line distances
\linespread{1.1}

% Add a ':' for mathmode with tiny whitespaces around
\newcommand{\SlimDdot}{\ensuremath{\mathrm{:}}}


% headline and cover generation commands

% generate a simple headline
% usage: \CmHeadline[date]{title}{topic}{author}
\newcommand{\CmHeadline}[4][]{
  \begin{minipage}[t]{\textwidth}
    \huge{\textbf{#2}}\\
    \large{#3, #4}\relax
    \ifthenelse{\isempty{#1}}{}{\relax\large{, #1}}
  \end{minipage}
}

% generate a simple cover page
% usage: \CmCover[type(,skript)]{title}{subtitle}{date}
\newcommand{\CmCover}[4][]{
  \thispagestyle{empty}
  \begin{titlepage}
    \begin{center}
      \begin{minipage}[b]{0.8\textwidth}
	\vspace*{5cm}
        \ifthenelse{\isempty{#1}}{
          % Default cover arrangement
          \Huge{\textbf{#2}}\\[0.5cm]
          \huge{#3}\\[0.8cm]
          \Large{#4}
        }{
          \ifthenelse{\equal{#1}{skript}}{
            % Cover for lecture scripts
            \huge{#3}\\[0.5cm]
            \Huge{\textbf{#2}}\\[0.5cm]
            \Large{#4}
          }{}
        }
      \end{minipage}
    \end{center}
  \end{titlepage}
  \pagebreak
}


% indexing support

% Print and index given text
% usage: \CmIndex{[(optionally put another text for the index in here)]{(text to print and add to index)}
\newcommand{\CmIndex}[2][]{\ifthenelse{\isempty{#1}}{\index{#2}}{\index{#1}}#2}

% Highlight(bold) and index the given text
% usage: \CmMark[(optionally put another text for the index in here)]{(text to highlight and add to index)}
\newcommand{\CmMark}[2][]{\textbf{\CmIndex[#1]{#2}}}


% sectioning support

% Prints a description for a section in italic, bold. Most likely to use right under \section.
% usage: \CmSectionDescription{(short description of section contents)}
\newcommand{\CmSectionDescription}[1]{
  \vspace{-0.3cm}
  \hangindent=0.4cm
  \hangafter=0
  \begin{itshape}
    \textbf{#1}
  \end{itshape}
  \vspace{0.3cm}
}

% Starts a new paragraph inside of a theorem environment (as defined above)
% usage \CmSubThm[(paragraph title)]
\newenvironment{CmSubThm}[1]{
  \begin{itemize}[leftmargin=0.5cm,label=]
  \item
    \ifthenelse{\isempty{#1}}{}{
      \hspace{-0.5cm}(\textit{#1})\\[0.2cm]
    }
  }{
  \end{itemize}
}


% svg updater
% needs shell escape option

% Checks if the given image file has been modified and a custom command (if possible) via command line to generate something new.
\newcommand{\CmExecuteIfFileNewer}[3]{
  \ifnum\pdfstrcmp{\pdffilemoddate{#1}}
  {\pdffilemoddate{#2}}>0
  {\immediate\write18{#3}}\fi
}

% Tries to include an image file and checks if the given one has been modified. If so it calls inkscape (if possible) via command line to generate new pdf und pdf_tex files from the corresponding svg.
\newcommand{\CmIncludeSvg}[1]{
  \def\svg@filepath{}
  
  % check if corrosponding svg file exists
  \IfFileExists{#1.svg}
  {
    \def\svg@filepath{#1}
  }{
    % if it does not, search in the graphicspath for it
    \expandafter\@tfor\expandafter\currentsvgpath\expandafter:\expandafter=\Ginput@path\do{
      \IfFileExists{\currentsvgpath#1.svg}{
        \edef\svg@filepath{\currentsvgpath #1}
      }{}
    }
  }
  % if something was found, include the graphic, TODO: Make it work correctly
  \ifthenelse{\isundefined{\svg@filepath} \OR \isempty{\svg@filepath}}{
    \PackageError{canonicalmath}{Image file not found!}
  }{
    \PackageWarning{FilePath}{|\svg@filepath|}
    \CmExecuteIfFileNewer{\svg@filepath.svg}{\svg@filepath.pdf}{inkscape -z -D --file=\svg@filepath.svg --export-pdf=\svg@filepath.pdf --export-latex}
    \input{\svg@filepath.pdf_tex}
  }
}

% Tries to include an image file on the center of the margin at the current position.
\newcommand{\CmMarginSvg}[3][0cm]{
  \marginnote{
    \centering
    \def\svgwidth{#3}
    \CmIncludeSvg{#2}
  }[#1]
}

% Tries to include an image file centering it at the current position
\newcommand{\CmPutSvg}[3][0cm]{
  \begin{figure}[h!]
    \vspace{#1}
    \centering
    \def\svgwidth{#3}
    \CmIncludeSvg{#2}
  \end{figure}
}
\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{canonicalsync}
\CsUsePackage[/home/JB/Projects/tex-package-canonical-sync/]{canonicalsync}
\CsUsePackageWithOptions[/home/JB/Projects/tex-package-canonical-math/]{canonicalmath}{marginthm}

\usepackage{mathtools}

\usepackage{graphicx}
\usepackage{float}
\usepackage{xcolor}
\usepackage{transparent}
\usepackage{wrapfig}

\graphicspath{{img/}}

\parindent0pt

% Befehl fuer Anfuerungszeichen unten und oben
\newcommand{\quot}[1]{\textrm{\glqq}{#1}\textrm{\grqq}}

\setlist[enumerate]{label=(\arabic*), itemsep=0cm, leftmargin=1cm}

%--------------------------------------------------------------------
%-------------------- Eintraege fuer das Glossar --------------------
%--------------------------------------------------------------------

\newglossaryentry{topologischer Raum}{name=Topologischer Raum,description={Eine Menge \ensuremath{X} zusammen mit einer Topologie \ensuremath{T}, das hei\ss t einem Mengensystem das offene Teilmengen von \ensuremath{X} definiert, wobei die leere Menge, die Grundmenge, der Durchschnitt endlich vieler offener Mengen und die Vereinigung beliebig vieler offener Mengen offen sind},text={topologischer Raum}}

\newglossaryentry{Hausdorff-Raum}{name=Hausdorff-Raum,description={Ein topologischer Raum \ensuremath{M}, in dem es f"ur alle \ensuremath{x, y \in M, x \ne y} disjunkte offene Umgebungen \ensuremath{U(x)} und \ensuremath{U(y)} gibt, es werden also alle paarweise verschiedenen Punkte \ensuremath{x, y} durch Umgebungen getrennt.},text={Hausdorff-Raum}}

%--------------------------------------------------------------------
%-------------------- Hier beginnt das Skript -----------------------
%--------------------------------------------------------------------

\begin{document}

\CmHeadline{Vorlesung Differentialgeometrie}{Gehalten von Dr. Grensing}{Wintersemester 2012/13}

\vspace{0.5cm}

Version \textbf{0.01} \quad Build: \today

\paragraph{Wichtiger Hinweis:}
Dies ist eine Zusammenfassung der Vorlesung "`Differentialgeometrie"' von Dr. Grensing im Wintersemester 2012/13 am KIT und dient lediglich dazu die Inhalte für meine eigene Verwendung besser zusammenzufassen und aufzubereiten. Es besteht weder eine Garantie über Vollständigkeit, noch Korrektheit der enthaltenen Aussagen.\\

Bei Anmerkungen bzw. beim Auffinden von Fehlern schicken Sie bitte eine E-Mail an
\begin{center}
  jan-bernhard.kordass@student.kit.edu
\end{center}

\input{chapter/1}
\input{chapter/2}
\input{chapter/3}


%-_-_-_-_-_-_-_-_-_-_-_-_-_-_ Anhang -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_

\appendix

%-_-_-_-_-_-_-_-_-_-_-_-_-_-_ Uebungen -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_

%-_-_-_-_-_-_-_-_-_-_-_-_-_-_ Stichwortverzeichnis -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_

\printindex

%-_-_-_-_-_-_-_-_-_-_-_-_-_-_ Symbolverzeichnis -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_

\printglossaries

%-_-_-_-_-_-_-_-_-_-_-_-_-_-_ Literaturverzeichnis -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_

\end{document}
